# ToiletWidget

Windows デスクトップ向けのトイレ状況表示ウィジェットです。  
タスクトレイ常駐型で、トイレの「空き／使用中」ステータスを表示します。

---

## 概要

ToiletWidget は、社内利用を想定した軽量なデスクトップウィジェットです。  
小さなウィンドウで現在のトイレ利用状況を表示し、必要に応じて前面表示（通知）を行います。

---

## 特徴

- .NET 8 + WebView2 による Windows デスクトップアプリ
- タスクトレイ常駐型
- 小型ウィンドウによるトイレ状況の常時確認
- トイレの空き／使用中ステータスをリアルタイム表示
- 通常時は最前面固定しない（他のウィンドウの背面に回る）
- ステータス変化時に、設定に応じて一時的に前面表示
- 通知（前面表示）の ON / OFF 切り替え可能
- ユーザー設定により「常に最前面表示」を有効化可能
- EXE 単体で配布可能（管理者権限不要）

---

## 動作環境

- Windows 11（Pro 想定）
- .NET 8 Desktop Runtime
- Microsoft Edge WebView2 Runtime  
  ※ Windows 11 では通常インストール済み

---

## 使い方

1. `ToiletWidget.exe` を起動します
2. タスクトレイにアイコンが表示されます

### 操作方法

- タスクトレイアイコン **ダブルクリック**  
  → ウィンドウを表示
- タスクトレイアイコン **右クリック**  
  → 表示 / 非表示 / 通知設定 / 常に最前面 / 終了
- ウィンドウはヘッダー部分をドラッグして移動できます

---

## 前面表示・通知について

- 通常時は他のウィンドウより前面に固定されません
- トイレの状態が変化した際、設定に応じて一時的に前面表示します
- 前面表示（通知）の有無はタスクトレイメニューから切り替え可能です
- 「空き」「使用中」を個別に ON / OFF 設定できます
- ユーザー設定により、常時最前面表示に切り替えることも可能です

---

## データ保存先

初回起動時に以下のフォルダを自動作成します。

```text
%LOCALAPPDATA%\ToiletWidget\
```

### 内容

- `Assets\`
  - 表示用 HTML
  - アイコンファイル
- `WebView2\`
  - WebView2 のユーザーデータ
- `settings.json`
  - ユーザー設定（通知設定・最前面設定など）

※ ユーザーごとに保存され、管理者権限は不要です。

---

## 技術構成

- WPF (.NET 8)
- Microsoft.Web.WebView2
- HTML / CSS による表示 UI
- 単一 EXE 配布（Assets は実行時に展開）

---

## 備考

- WebView2 Runtime が未導入の場合、起動時にエラーになります
- 社内テスト・業務利用を前提としたプロジェクトです

---

## ライセンス

社内利用を前提としたプロジェクトです。

© hiro MIT License
